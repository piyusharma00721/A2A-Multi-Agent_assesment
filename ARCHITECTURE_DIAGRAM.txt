MULTI-AGENT QUERY ROUTER - ARCHITECTURE DIAGRAM
================================================

┌─────────────────────────────────────────────────────────────────────────────────┐
│                                USER INTERFACE                                   │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │
│  │   CLI Interface │  │  Interactive    │  │   Demo Script   │                │
│  │   (main.py)     │  │     Mode        │  │   (demo.py)     │                │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                │
└─────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              ORCHESTRATOR LAYER                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                        LangGraph Workflow                              │   │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │   │
│  │  │   Router    │───▶│   Agent     │───▶│ Synthesizer │                │   │
│  │  │   Node      │    │ Selection   │    │   Node      │                │   │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                               AGENT LAYER                                      │
│                                                                                 │
│  ┌─────────────────────────────────┐    ┌─────────────────────────────────┐    │
│  │        WEB SEARCH AGENT         │    │      FILE ANALYSIS AGENT        │    │
│  │                                 │    │                                 │    │
│  │  ┌─────────────────────────────┐│    │  ┌─────────────────────────────┐│    │
│  │  │     DuckDuckGo API          ││    │  │     Multi-Modal Processing  ││    │
│  │  │   • General Search          ││    │  │   • PDF (PyMuPDF)          ││    │
│  │  │   • News Search             ││    │  │   • Images (Tesseract OCR) ││    │
│  │  │   • Result Processing       ││    │  │   • CSV/Excel (Pandas)     ││    │
│  │  │   • Key Extraction          ││    │  │   • Text Files             ││    │
│  │  └─────────────────────────────┘│    │  └─────────────────────────────┘│    │
│  │                                 │    │                                 │    │
│  │  ┌─────────────────────────────┐│    │  ┌─────────────────────────────┐│    │
│  │  │     Information Extraction  ││    │  │     RAG Pipeline            ││    │
│  │  │   • Relevance Scoring       ││    │  │   • Text Chunking           ││    │
│  │  │   • Source Citation         ││    │  │   • Embedding Generation    ││    │
│  │  │   • Confidence Calculation  ││    │  │   • FAISS Vector Store      ││    │
│  │  └─────────────────────────────┘│    │  │   • Similarity Search       ││    │
│  └─────────────────────────────────┘    │  └─────────────────────────────┘│    │
│                                         └─────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              SYNTHESIS LAYER                                   │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                        Response Synthesizer                            │   │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │   │
│  │  │ Context Format  │  │   Gemini LLM    │  │ Citation Extract│        │   │
│  │  │ • Web Results   │  │   Processing    │  │ • Source Links  │        │   │
│  │  │ • File Results  │  │ • Response Gen  │  │ • Confidence    │        │   │
│  │  │ • Combination   │  │ • Error Handle  │  │ • Metadata      │        │   │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                               OUTPUT LAYER                                     │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                           Final Response                               │   │
│  │  • Synthesized Answer                                                  │   │
│  │  • Source Citations                                                    │   │
│  │  • Confidence Score                                                    │   │
│  │  • Processing Metadata                                                 │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                               LOGGING LAYER                                    │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                         JSON Logger                                    │   │
│  │  • Request/Response Logging                                            │   │
│  │  • Performance Metrics                                                 │   │
│  │  • Error Tracking                                                      │   │
│  │  • Statistics Generation                                               │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘

DATA FLOW SEQUENCE:
==================

1. USER INPUT
   └── Query + Optional Files
       │
       ▼

2. ROUTER NODE (Gemini LLM)
   └── Query Classification
       │
       ▼

3. AGENT SELECTION
   ├── WEB_SEARCH → Web Search Agent
   ├── FILE_ANALYSIS → File Analysis Agent
   └── BOTH → Both Agents (Parallel/Sequential)
       │
       ▼

4. AGENT EXECUTION
   ├── Web Search Agent
   │   ├── DuckDuckGo API Call
   │   ├── Result Processing
   │   └── Key Information Extraction
   │
   └── File Analysis Agent
       ├── Multi-Modal File Processing
       ├── Text Extraction & Chunking
       ├── Embedding Generation
       ├── FAISS Vector Store
       └── Similarity Search
       │
       ▼

5. SYNTHESIZER (Gemini LLM)
   ├── Context Combination
   ├── Response Generation
   ├── Citation Extraction
   └── Confidence Scoring
       │
       ▼

6. FINAL RESPONSE
   ├── Synthesized Answer
   ├── Source Citations
   ├── Confidence Score
   └── Processing Metadata
       │
       ▼

7. LOGGING
   └── JSON Log Entry with Full Context

TECHNOLOGY STACK:
================

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              TECHNOLOGY STACK                                  │
│                                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │
│  │   LLM Layer     │  │  Orchestration  │  │   Data Layer    │                │
│  │                 │  │                 │  │                 │                │
│  │ • Google Gemini │  │ • LangGraph     │  │ • FAISS Vector  │                │
│  │ • LangChain     │  │ • State Mgmt    │  │ • JSON Logging  │                │
│  │ • Prompt Eng    │  │ • Workflow      │  │ • File Storage  │                │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                │
│                                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │
│  │  Search Layer   │  │ Processing Layer│  │  Interface Layer│                │
│  │                 │  │                 │  │                 │                │
│  │ • DuckDuckGo    │  │ • PyMuPDF       │  │ • CLI Interface │                │
│  │ • Web Scraping  │  │ • Tesseract OCR │  │ • Interactive   │                │
│  │ • News API      │  │ • Pandas        │  │ • Demo Script   │                │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                │
│                                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │
│  │  ML/AI Layer    │  │  Utils Layer    │  │  Config Layer   │                │
│  │                 │  │                 │  │                 │                │
│  │ • HuggingFace   │  │ • Logging       │  │ • Environment   │                │
│  │ • Embeddings    │  │ • Error Handle  │  │ • Validation    │                │
│  │ • Similarity    │  │ • File Utils    │  │ • Templates     │                │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                │
└─────────────────────────────────────────────────────────────────────────────────┘

PERFORMANCE TARGETS:
===================

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              PERFORMANCE TARGETS                               │
│                                                                                 │
│  Component              │  Target Time  │  Description                         │
│  ──────────────────────┼────────────────┼─────────────────────────────────────  │
│  Router Classification  │  < 2 seconds  │  Query analysis & agent selection    │
│  Web Search             │  < 5 seconds  │  API calls & result processing       │
│  File Processing        │  < 10 seconds │  Text extraction & vector building   │
│  Response Synthesis     │  < 3 seconds  │  LLM processing & citation           │
│  Total End-to-End       │  < 15 seconds │  Complete query processing           │
│                                                                                 │
│  Quality Metrics:                                                               │
│  • Routing Accuracy: ≥80% on test prompts                                      │
│  • Answer Relevance: Manual validation for 10 cases                            │
│  • System Resilience: Graceful error handling                                  │
└─────────────────────────────────────────────────────────────────────────────────┘

